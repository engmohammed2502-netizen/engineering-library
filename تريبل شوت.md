
pm2 stop engineering-library-api


cd /var/www/engineering-library/server

# حذف المكاتب القديمة لضمان نظافة التثبيت (مثلما فعلنا في الرياكت)
rm -rf node_modules package-lock.json

# تثبيت المكاتب من جديد
npm install


npm list morgan



pm2 restart engineering-library-api
pm2 logs engineering-library-api --lines 50




const auth = require('./auth');
const permissions = require('./permissions');
const security = require('./security');
const upload = require('./upload');

module.exports = {
  auth,
  permissions,
  security,
  upload
};















# أولاً: أوقف MongoDB إذا كان يعمل
sudo systemctl stop mongod 2>/dev/null || true
sudo pkill -f mongod 2>/dev/null || true

# ثانياً: إنشاء مجلد للبيانات
sudo mkdir -p /data/db
sudo chmod 777 /data/db

# أو استخدم مسار في home
mkdir -p ~/mongodb-data
sudo chmod 777 ~/mongodb-data

# ثالثاً: تشغيل mongod
sudo mongod --dbpath /data/db --fork --logpath /var/log/mongodb.log --bind_ip 0.0.0.0

# أو بدون sudo
mongod --dbpath ~/mongodb-data --fork --logpath ~/mongodb.log --bind_ip 0.0.0.0







# تشغيل الخدمة
sudo systemctl start mongod

# تمكين التشغيل التلقائي عند الإقلاع
sudo systemctl enable mongod

# التحقق من حالة الخدمة
sudo systemctl status mongod








sudo npm install -g pm2 --registry=https://registry.npmmirror.com





#خطوات تريبل شوت


# 1. تحقق من تشغيل الخدمات
sudo systemctl status mongodb
pm2 status

# 2. تحقق من المنافذ
sudo netstat -tulpn | grep :9000

# 3. شاهد السجلات
pm2 logs engineering-library-api
tail -f /var/log/mongodb/mongod.log

# 4. اختبار الاتصال
curl -v http://localhost:9000/api/health

# 5. إعادة التشغيل
pm2 restart engineering-library-api






# انتقل للمجلد الرئيسي
cd /var/www/engineering-library

# أنشئ قاعدة البيانات
mongosh --eval "
use engineering_library
db.createCollection('users')
db.users.insertOne({
  universityId: 'zero',
  name: 'System Root',
  password: '\$2a\$12\$6VX8Q7bY5Z9Q9Q9Q9Q9Q9Q.9Q9Q9Q9Q9Q9Q9Q9Q9Q9Q9Q9Q9Q9Q9Q', // 975312468qq مشفرة
  role: 'root',
  isActive: true,
  createdAt: new Date()
})
print('✅ قاعدة البيانات وحساب الروت جاهزان')
"







Act as a Senior Software Architect. Please perform a comprehensive static code analysis on the provided files. Your goal is to identify naming conflicts, logical errors, broken import/export paths, and any issues that could cause the application to crash or components to become unresponsive.
​Please focus on the following:
​Cross-file dependencies: Check if file paths and imports are correct and linked properly.
​Naming Conventions: Identify any variable or function naming conflicts across files.
​Syntax & Logic: Find errors that would prevent the build or cause runtime crashes.
​Component Integrity: Ensure components are correctly defined and called.
​Output your response as a structured report containing:
​File Name & Path
​The Specific Error/Conflict
​Severity Level (Critical/Warning)
​Proposed Solution/Fix code snippet"






Yes, please start fixing all critical issues and naming conflicts you found. Apply the changes directly to the files."




Analyze this project and tell me: Is it ready for production build and server hosting? Please check for: 1. Configuration errors (Environment variables). 2. Potential build-time failures. 3. Missing dependencies. 4. Security vulnerabilities (like exposed keys). 5. Proper file paths and case-sensitivity for Linux servers. Give me a 'Go' or 'No-Go' status with a list of required fixes





Please generate a deployment checklist specific to this project to follow during server setup."


